<ng-template #content let-modal>
  <div class="modal-header">
    <div style="flex-direction: column">
      <h4 class="modal-title" id="modal-basic-title mb-1">
        &lt; Account &gt; is missing a primary beneficiary
      </h4>
      <p class="fnt-09 mt-1">
        Now that you&#039;ve transferred money to this account, let&#039;s make
        sure you secure your assets with a beneficiary. Naming a beneficiary is
        free and it only takes a few minutes.
      </p>
    </div>

    <button
      type="button"
      class="btn-close cls-btn"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <div class="container">
      <div class="card">
        <div class="card-body">
          <div class="d-flex justify-content-end position-absolute right-1">
            <button type="button" class="btn btn-success mr-2">Add</button>
            <button type="button" class="btn btn-danger">Remove</button>
          </div>

          <div class="beneficiary-form">
            <div class="row">
              <div class="mb-3 col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Primary beneficiary</label
                >
                <select
                  class="form-select is-valid"
                  aria-label="Default select example"
                >
                  <option selected>Open this select menu</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div class="col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Full Name</label
                >
              </div>
            </div>

            <div class="row mb-3">
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >First name</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >Middle name (optional)</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >Last name</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Date of birth</label
                >
                <div class="input-group">
                  <input
                    id="dateOfBirth"
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dp"
                    ngbDatepicker
                    #dp="ngbDatepicker"
                  />
                  <button
                    class="btn btn-outline-secondary bi bi-calendar3"
                    (click)="dp.toggle()"
                    type="button"
                  ></button>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="exampleInputEmail1" class="form-label fw-semibold"
                    >Percentage assigned</label
                  >
                  <input
                    type="email"
                    class="form-control mw-14rem is-valid"
                    id="exampleInputEmail1"
                    aria-describedby="emailHelp"
                    placeholder="Enter email"
                  />
                  <small id="emailHelp" class="form-text text-muted">
                    Total percentage assigned must equal 100% if you have
                    multiple beneficiaries
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <div class="d-flex justify-content-end position-absolute right-1">
            <button type="button" class="btn btn-success mr-2">Add</button>
            <button type="button" class="btn btn-danger">Remove</button>
          </div>

          <div class="beneficiary-form">
            <div class="row">
              <div class="mb-3 col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Primary beneficiary</label
                >
                <select
                  class="form-select is-valid"
                  aria-label="Default select example"
                >
                  <option selected>Open this select menu</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div class="col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Full Name</label
                >
              </div>
            </div>

            <div class="row mb-3">
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >First name</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >Middle name (optional)</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
              <div class="col">
                <label for="exampleFormControlInput1" class="form-label fnt-09"
                  >Last name</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleFormControlInput1"
                  placeholder="name@example.com"
                />
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-4">
                <label
                  for="exampleFormControlInput1"
                  class="form-label fw-semibold"
                  >Date of birth</label
                >
                <div class="input-group">
                  <input
                    id="dateOfBirth"
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dp"
                    ngbDatepicker
                    #dp="ngbDatepicker"
                  />
                  <button
                    class="btn btn-outline-secondary bi bi-calendar3"
                    (click)="dp.toggle()"
                    type="button"
                  ></button>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="exampleInputEmail1" class="form-label fw-semibold"
                    >Percentage assigned</label
                  >
                  <input
                    type="email"
                    class="form-control mw-14rem is-valid"
                    id="exampleInputEmail1"
                    aria-describedby="emailHelp"
                    placeholder="Enter email"
                  />
                  <small id="emailHelp" class="form-text text-muted">
                    Total percentage assigned must equal 100% if you have
                    multiple beneficiaries
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close('Save click')"
    >
      Save
    </button>
  </div>
</ng-template>

<!-- <pre>{{ closeResult }}</pre> -->

<div class="d-flex justify-content-center align-items-center mt-4">
  <div class="p-5 mb-4 bg-light rounded-3">
    <div class="container-fluid py-5">
      <h4 class="display-6 fw-bold">Action Needed</h4>
      <p class="col-md-8 fs-4">
        This is to inform you that the primary beneficiary information for your
        account is missing. Kindly update your beneficiary details immediately
        to ensure the smooth processing of any potential claims or
        distributions.
      </p>
      <button
        class="btn btn-primary btn-lg"
        type="button"
        (click)="open(content)"
      >
        Add Beneficiary
      </button>
    </div>
  </div>
</div>

<div>
  <div class="card">
    <div class="card-body">
      <div class="d-flex justify-content-end position-absolute right-1 gap-2">
        <button type="button" class="btn btn-light" *ngIf="beneficiaries.length < 3" (click)="addNewBeneficiary()">
          <i class="bi bi-plus-circle"></i> Add New
        </button>
        <button type="button" class="btn btn-warning" *ngIf="beneficiaries.length > 1">
          <i class="bi bi-trash"></i> Remove
        </button>
      </div>

      <form [formGroup]="beneficiariesForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="beneficiary-form" formArrayName="beneficiaries">
          <div
            *ngFor="let beneficiary of beneficiaries.controls; let i = index"
          >
            <div [formGroupName]="i">
              {{ i }}
              <div class="row">
                <div class="mb-3 col-4">
                  <label
                    for="exampleFormControlInput1"
                    class="form-label fw-semibold"
                    >Primary beneficiary</label
                  >
                  <select
                    class="form-select is-valid"
                    aria-label="Default select example"
                    formControlName="type"
                    (change)="onSelectChange($event, i)"
                  >
                    <option [value]="null">Please select</option>
                    <option
                      *ngFor="let option of allBeneficiaryTypes"
                      [value]="option"
                    >
                      {{ option | capitalize }}
                    </option>
                  </select>
                </div>
              </div>

              <ng-container #otherFormFields></ng-container>

            </div>
          </div>
        </div>

        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>
